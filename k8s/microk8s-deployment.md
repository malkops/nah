# Домашнее задание к занятию «Запуск приложений в K8S»

### Задание 1. Создать Deployment и обеспечить доступ к репликам приложения из другого Pod

1. Создать Deployment приложения, состоящего из двух контейнеров — nginx и multitool. Решить возникшую ошибку.
2. После запуска увеличить количество реплик работающего приложения до 2.
3. Продемонстрировать количество подов до и после масштабирования.
4. Создать Service, который обеспечит доступ до реплик приложений из п.1.
5. Создать отдельный Pod с приложением multitool и убедиться с помощью `curl`, что из пода есть доступ до приложений из п.1.

До:
![image](https://github.com/malkops/nah/assets/44001733/590ca555-f7bc-4f6b-ac5f-a2199554b6ea)

После:
![image](https://github.com/malkops/nah/assets/44001733/8d0d5a58-b166-4910-baca-664b5c6a534b)

Трафик в под:
![image](https://github.com/malkops/nah/assets/44001733/a0fa9bf2-011a-4901-a12f-159fd2c4b793)

Трафик из пода в под:
![image](https://github.com/malkops/nah/assets/44001733/4cd71b2d-bf45-4816-80d9-209a14c44162)

------

### Задание 2. Создать Deployment и обеспечить старт основного контейнера при выполнении условий

1. Создать Deployment приложения nginx и обеспечить старт контейнера только после того, как будет запущен сервис этого приложения.
2. Убедиться, что nginx не стартует. В качестве Init-контейнера взять busybox.
3. Создать и запустить Service. Убедиться, что Init запустился.
4. Продемонстрировать состояние пода до и после запуска сервиса.

Не стартует:
![image](https://github.com/malkops/nah/assets/44001733/0b1559c4-d395-456c-9c58-f23fe44f08bc)

![image](https://github.com/malkops/nah/assets/44001733/2d276138-25bd-419c-af47-e3a6f561a2ee)

Стартанул:
![image](https://github.com/malkops/nah/assets/44001733/9121497c-0155-46cf-9078-2fadbf23f111)

[Манифест находится тут](tmp/microk8s-deployment/)
