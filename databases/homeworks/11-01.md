# Домашнее задание к занятию 11.1 "Базы данных, их типы"

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая так же занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на Ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
_1.1 Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчетов и прогнозирования рисков (СУБД должна гарантировать целостность и четкую структуру данных)._

- Стоит выбрать SQL СУБД с согласованностью и усточивостью к разделению. Вполне подойдет postgresql.

_1.1* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?_

- Тут можно прикрутить redis например, так как на нем можно сделать хеширование. 

_1.2 Под каждый девелоперский проект создается отдельный лендинг и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? (СУБД должны быть гибкими и быстрыми)._

- Стоит выбрать NoSQL СУБД, например MongoDB. Она достаточно гибкая, чтобы под каждый лендинг создавать свою сущность, которая будет хранить данные для каждого лендинга.

_1.2* Можно ли данную задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?_

- Да, можно. MongoDB как вариант.

_1.3 Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуры компании (СУБД должна иметь простую и понятную структуру)._

- Пойдйдет SQL СУБД. РСУБД - postgresql. oracle, mysql, sqlserver и т.д. Зависит от бюджета на лицензии, компетенции ДБА и сил на поддержку систем.

_1.3* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?_

- Можно использовать СУБД из 1.1, можно реализовать созданием еще таблиц, либо отдельной схемой. Лучше конечно создать новую схему, если эти отделы никак не связаны.

_1.4 Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов (СУБД должна уметь быстро работать со связями)._

- Как вариант сетевая, но более предпочтительно графовая NoSQL. Так как все карты и построение маршрутов на них, реализуются на базе графов.

_1.4* Можно ли к этой СУБД подключить отдел Закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?_

- Зависит от того, какую логику будет реализовывать отдел закупок и какая у них будет связь с логистами. Пока что кажется, что лучше сделать отельную СУБД под них и связать с логистами.

_1.5* Можно ли все перечисленные выше задачи решить используя одну СУБД? Если да, то какой именно?_

- Как вариант можно посмтреть в стороне PostgreSQL, но скорее всего нет. Как минимум надо реализовать хеши для 1.1*

---

### Задание 2. Транзакции.

_2.1 Пользователь пополняет баланс счета телефона, распишите пошагово какие действия должны произойти для того, чтобы транзакция завершилась успешно (ориентируйтесь на 6 действий)._

Предположим, что пополнение происходит через мобильное приложение банка (ДБО). Это будет влиять на несколько пунктов, но основной принцип будет один.

1. Пользователь заходит в ДБО, проверяет баланс, при необходимости пополняет карту. Далее выбирает услугу пополнение телефона, вводит реквизиты и сумму и нажимает оплатить.
На данном этапе происходит проверка подлинности пользователя при входе в приложение и подгрузка всех его счетов (это чтение из БД). При попытке оплаты, происходит проверка доступности баланса после списания (тоже чтение).
1. После нажатия оплаты, денежные средства не списываются, а холдируются (запись в ДБ).
1. Происходит обмен между банками и плтежной системой (тоже запись всех ответов от платежной системы и банком).
1. При получении подтверждения об успешной оплате, денежные средства списываются окончательно (запись в БД).
При получении отказа со стороны банка получателя или платежной системы, денежные средства возвращаются из холда и снова доступны пользователю (запись в БД).
1. Пользователь может проверить доступный баланс в ДБО и на телефоне. При необходимости повторить процедуру платежа.

_2.1* Какие действия должны произойти, если пополнение счета телефона происходило бы через автоплатеж?_

1. Система автоматически формирует платеж, про происходят проверки доступности оплаты, наличие денежных средств и т.д. (чтение из БД).
1. Далее все пункты совпадают с пунктами выше.

---

### Задание 3. SQL vs NoSQL

_3.1 Напишите 5 преимуществ SQL систем по отношению к NoSQL._

1. Стандартизированная схема БД;
2. Пока еще большее сообщество и поддержка;
3. Не надо писать код (user fiendly синтаксис);
4. Соответствие ACID (atomicity, consistency, isolation, durability);
5. Легче строить сложные запросы.

_3.1* Какие, на Ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL._

NewSQL системы пытаются совместить в себе лучшие стороны SQL и NoSQL систем. Это соблюдение ACID, поддержка свободы и стандартизации схемы, горизонтальное и вертикальное масштабирование, поддержка высокой доступности из коробки.

---

### Задание 4. Кластеры

_Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин._

- Лушче подойдут системы класса CP, так как в данном случае можно пренебречь доступностью.

_На основе какого критерия будете выбирать тип СУБД и какая модель *распределенных вычислений* здесь справится лучше всего и почему?_

- Про модели ничего не знаю( Но могу предположить, что подойдет mapReduce, всё таки google создали.

